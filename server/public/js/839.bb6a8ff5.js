"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[839],{2839:(t,e,o)=>{o.r(e),o.d(e,{default:()=>$});var i=o(3673),a=o(2323);const s=t=>((0,i.dD)("data-v-2012fef4"),t=t(),(0,i.Cn)(),t),l={class:"column items-center"},r={class:"productDetail"},n={class:"row"},d={class:"col-12 col-md-6 q-pa-sm"},c={class:"col-12 col-md-6 q-pa-sm column justify-between"},u={class:"text-h4"},p={class:"text-h6"},m={key:0,class:"row"},g={class:"column q-pa-sm"},h=s((()=>(0,i._)("div",{class:"text-h6"},"DescripciÃ³n",-1)));function q(t,e,o,s,q,y){const f=(0,i.up)("q-carousel-slide"),v=(0,i.up)("q-carousel"),k=(0,i.up)("q-rating"),_=(0,i.up)("q-input"),D=(0,i.up)("q-btn");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",r,[(0,i._)("div",n,[(0,i._)("div",d,[(0,i.Wm)(v,{animated:"",thumbnails:"",modelValue:q.slide,"onUpdate:modelValue":e[0]||(e[0]=t=>q.slide=t),arrows:"",infinite:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(q.productDetails.fotos,((t,e)=>((0,i.wg)(),(0,i.j4)(f,{key:t,name:e+1,"img-src":"https://coderhouse-ecommerce.s3.amazonaws.com/"+t},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue"])]),(0,i._)("div",c,[(0,i._)("div",null,[(0,i._)("div",u,(0,a.zw)(q.productDetails.nombre),1),(0,i._)("div",p,(0,a.zw)(y.formattedPrice),1),(0,i._)("div",null,(0,a.zw)(q.productDetails.stock+" un. disponibles"),1),(0,i.Wm)(k,{modelValue:q.rating,"onUpdate:modelValue":e[1]||(e[1]=t=>q.rating=t),size:"2em",icon:"star"},null,8,["modelValue"])]),y.isLoggedIn?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",null,[(0,i.Wm)(_,{modelValue:q.qty,"onUpdate:modelValue":e[2]||(e[2]=t=>q.qty=t),modelModifiers:{number:!0},type:"number",rules:[t=>t<=this.productDetails.stock||"No hay stock suficiente",t=>t>0||"La cantidad debe ser mayor a 0"],outlined:"",dense:"",style:{"max-width":"120px"},suffix:"un.",class:"q-mr-sm"},null,8,["modelValue","rules"])]),(0,i._)("div",null,[(0,i.Wm)(D,{disable:q.loading||q.qty<=0||q.qty>q.productDetails.stock,loading:q.loading,icon:"add_shopping_cart",color:"primary",label:"Agregar",onClick:y.addToCart},null,8,["disable","loading","onClick"])])])):(0,i.kq)("",!0)])]),(0,i._)("div",g,[h,(0,i._)("div",null,(0,a.zw)(q.productDetails.descripcion),1)])])])}const y={name:"Product",data(){return{loading:!1,slide:1,rating:4,qty:1,productDetails:{nombre:"",descripcion:"",categoria:"",precio:0,stock:0,fotos:[],id:""}}},created(){this.getProductDetails()},computed:{isLoggedIn(){return null!==this.$q.cookies.get("token")},formattedPrice(){return this.productDetails.precio.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}},methods:{getProductDetails(){this.$axios({method:"GET",url:"/api/products/"+this.$route.params.id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")}}).then((t=>{this.productDetails=t.data.data})).catch((t=>{this.$q.notify({position:"bottom-right",color:"negative",message:"Error al obtener los datos del producto"})}))},addToCart(){this.loading=!0;const t={product:this.productDetails.id,qty:this.qty};this.$axios({method:"PUT",url:"/api/cart/add",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")},data:t}).then((()=>{this.loading=!1,this.getProductDetails(),this.$q.notify({position:"bottom-right",color:"positive",message:"Producto agregado al carrito"})})).catch((t=>{this.loading=!1,this.$q.notify({position:"bottom-right",color:"negative",message:"Error al agregar al carrito"})}))}}};var f=o(4260),v=o(1277),k=o(4593),_=o(8833),D=o(4842),b=o(8240),w=o(7518),C=o.n(w);const V=(0,f.Z)(y,[["render",q],["__scopeId","data-v-2012fef4"]]),$=V;C()(y,"components",{QCarousel:v.Z,QCarouselSlide:k.Z,QRating:_.Z,QInput:D.Z,QBtn:b.Z})}}]);