"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[875],{9875:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});var i=o(3673);const s={class:"productList"},r=(0,i.Uk)(" Crear producto "),a={class:"row q-gutter-sm"},n={style:{width:"200px"}},l={style:{width:"200px"}};function d(e,t,o,d,c,u){const m=(0,i.up)("q-btn"),p=(0,i.up)("q-select"),h=(0,i.up)("q-icon"),f=(0,i.up)("q-input"),w=(0,i.up)("product-card"),g=(0,i.up)("q-table"),k=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(k,{padding:"",class:"flex justify-center"},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(g,{grid:"",rows:c.items,columns:c.columns,"row-key":"name","hide-header":"",pagination:c.pagination,loading:c.loading,"no-data-label":"No se encontraron productos..."},(0,i.Nv)({"top-right":(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",n,[(0,i.Wm)(p,{outlined:"",dense:"",modelValue:c.stockFilter,"onUpdate:modelValue":t[0]||(t[0]=e=>c.stockFilter=e),options:c.stockOptions,label:"Stock"},null,8,["modelValue","options"])]),(0,i._)("div",l,[(0,i.Wm)(p,{outlined:"",dense:"",modelValue:c.priceFilter,"onUpdate:modelValue":t[1]||(t[1]=e=>c.priceFilter=e),options:c.priceOptions,label:"Precio"},null,8,["modelValue","options"])]),(0,i._)("div",null,[(0,i.Wm)(f,{outlined:"",dense:"",debounce:"300",modelValue:e.filters.name,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filters.name=t),placeholder:"Buscar..."},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])])])),item:(0,i.w5)((e=>[(0,i.Wm)(w,{item:e,onReloadProducts:u.getProducts},null,8,["item","onReloadProducts"])])),_:2},[c.isAdmin?{name:"top-left",fn:(0,i.w5)((()=>[(0,i.Wm)(m,{dense:"",flat:"",color:"primary",onClick:u.newProduct},{default:(0,i.w5)((()=>[r])),_:1},8,["onClick"])]))}:void 0]),1032,["rows","columns","pagination","loading"])])])),_:1})}o(71);var c=o(2323);const u={class:"flex flex-center"},m={class:"text-subtitle1"},p={class:"text-caption text-grey"},h={class:"row justify-end",style:{width:"100%"}},f={class:"col-auto"},w={class:"col-auto"};function g(e,t,o,s,r,a){const n=(0,i.up)("q-img"),l=(0,i.up)("q-item-label"),d=(0,i.up)("q-item-section"),g=(0,i.up)("q-card-section"),k=(0,i.up)("q-separator"),b=(0,i.up)("q-btn"),P=(0,i.up)("q-card-actions"),_=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(_,{class:"product-card q-ma-sm"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"cursor-pointer",onClick:t[0]||(t[0]=(...e)=>a.openProduct&&a.openProduct(...e))},[(0,i._)("div",u,[(0,i.Wm)(n,{src:"https://coderhouse-ecommerce.s3.amazonaws.com/"+o.item.row.fotos[0],style:{width:"300px",height:"300px"},fit:"contain"},null,8,["src"])]),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"text-h6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,c.zw)(o.item.row.nombre),1)])),_:1}),(0,i.Wm)(l,{caption:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,c.zw)(o.item.row.stock+" un."),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i._)("div",m,(0,c.zw)("$ "+o.item.row.precio),1),(0,i._)("div",p,(0,c.zw)(o.item.row.descripcion),1)])),_:1})]),(0,i.Wm)(k),r.isAdmin?((0,i.wg)(),(0,i.j4)(P,{key:0},{default:(0,i.w5)((()=>[(0,i._)("div",h,[(0,i._)("div",f,[(0,i.Wm)(b,{flat:"",round:"",icon:"mode_edit",color:"primary",onClick:a.editProduct},null,8,["onClick"])]),(0,i._)("div",w,[(0,i.Wm)(b,{flat:"",round:"",icon:"delete",color:"red",onClick:a.deleteDialog},null,8,["onClick"])])])])),_:1})):(0,i.kq)("",!0)])),_:1})}const k={name:"ProductCard",props:["item"],data(){return{isAdmin:!0,stars:4}},methods:{openProduct(){this.$router.push({name:"ProductDetailPage",params:{id:this.item.row.id}})},editProduct(){this.$router.push(`/product/edit/${this.item.row.id}`)},deleteDialog(){this.$q.dialog({title:"Eliminar producto",message:"¿Está seguro de eliminar este producto?",ok:"Eliminar",cancel:"Cancelar",persistent:!0,persistentHint:"Presione ESC para cancelar"}).onOk(this.deleteProduct)},deleteProduct(){this.$axios.delete("/api/products/"+this.item.row.id).then((()=>{this.$q.notify({color:"positive",message:"Producto eliminado"}),this.$emit("reloadProducts")})).catch((e=>{this.$q.notify({color:"negative",message:"Error al eliminar el producto"})}))}}};var b=o(4260),P=o(151),_=o(4027),q=o(5589),v=o(2035),C=o(2350),W=o(5869),Z=o(9367),Q=o(8240),$=o(7518),x=o.n($);const y=(0,b.Z)(k,[["render",g]]),S=y;x()(k,"components",{QCard:P.Z,QImg:_.Z,QCardSection:q.Z,QItemSection:v.Z,QItemLabel:C.Z,QSeparator:W.Z,QCardActions:Z.Z,QBtn:Q.Z});var V=o(3617);const F={name:"ProductListPage",components:{ProductCard:S},data(){return{isAdmin:!0,pagination:{rowsPerPage:50},priceFilter:"Todos",priceOptions:["Todos","0 - 500","500 - 2000"],stockFilter:"Todos",stockOptions:["Todos","0 - 500","500 - 2000"],loading:!1,columns:[{name:"nombre",label:"Nombre",field:"nombre",align:"left",required:!0,sortable:!0},{name:"descripcion",align:"center",label:"Descripción",field:"descripcion",sortable:!0},{name:"precio",label:"Precio",field:"precio",format:e=>`$ ${e}`,sortable:!0},{name:"stock",label:"Stock",field:"stock",format:e=>`${e} un.`,sortable:!0}],items:[]}},computed:{...(0,V.rn)(["filters"])},mounted(){this.getProducts()},methods:{getProducts(){let e={};for(let t in this.filters)""!==this.filters[t]&&(e[t]="nombre"==t?this.filters[t].toString():Number(this.filters[t]));this.loading=!0,this.$axios.get("/api/products",{params:e}).then((e=>{console.log("FILTERS: ",this.filters),console.log(e.data.data),this.items=e.data.data,this.loading=!1}))},newProduct(){this.$router.push("/product/new")}}};var I=o(4379),E=o(8468),T=o(8516),U=o(4842),j=o(4554);const z=(0,b.Z)(F,[["render",d],["__scopeId","data-v-2e9b1415"]]),A=z;x()(F,"components",{QPage:I.Z,QTable:E.Z,QBtn:Q.Z,QSelect:T.Z,QInput:U.Z,QIcon:j.Z})}}]);