"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[587],{7587:(t,e,o)=>{o.r(e),o.d(e,{default:()=>j});var i=o(3673);function a(t,e,o,a,s,n){const r=(0,i.up)("product"),l=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(l,{padding:"",class:"flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(r)])),_:1})}var s=o(2323);const n={class:"column productDetail"},r={class:"row"},l={class:"col-6 q-pa-sm"},c={class:"col-6 q-pa-sm column justify-between"},d={class:"text-h4"},u={class:"text-h6"},p={key:0,class:"row"},m={class:"column q-pa-sm"},g=(0,i._)("div",{class:"text-h6"},"DescripciÃ³n",-1);function h(t,e,o,a,h,q){const y=(0,i.up)("q-carousel-slide"),f=(0,i.up)("q-carousel"),v=(0,i.up)("q-rating"),k=(0,i.up)("q-input"),w=(0,i.up)("q-btn");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",r,[(0,i._)("div",l,[(0,i.Wm)(f,{animated:"",thumbnails:"",modelValue:h.slide,"onUpdate:modelValue":e[0]||(e[0]=t=>h.slide=t),arrows:"",infinite:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.productDetails.fotos,((t,e)=>((0,i.wg)(),(0,i.j4)(y,{key:t,name:e+1,"img-src":"https://coderhouse-ecommerce.s3.amazonaws.com/"+t},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue"])]),(0,i._)("div",c,[(0,i._)("div",null,[(0,i._)("div",d,(0,s.zw)(h.productDetails.nombre),1),(0,i._)("div",u,(0,s.zw)(q.formattedPrice),1),(0,i._)("div",null,(0,s.zw)(h.productDetails.stock+" un. disponibles"),1),(0,i.Wm)(v,{modelValue:h.rating,"onUpdate:modelValue":e[1]||(e[1]=t=>h.rating=t),size:"2em",icon:"star"},null,8,["modelValue"])]),q.isLoggedIn?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("div",null,[(0,i.Wm)(k,{modelValue:h.qty,"onUpdate:modelValue":e[2]||(e[2]=t=>h.qty=t),modelModifiers:{number:!0},type:"number",rules:[t=>t<=this.productDetails.stock||"No hay stock suficiente",t=>t>0||"La cantidad debe ser mayor a 0"],outlined:"",dense:"",style:{"max-width":"120px"},suffix:"un.",class:"q-mr-sm"},null,8,["modelValue","rules"])]),(0,i._)("div",null,[(0,i.Wm)(w,{disable:h.loading||h.qty<=0||h.qty>h.productDetails.stock,loading:h.loading,icon:"add_shopping_cart",color:"primary",label:"Agregar",onClick:q.addToCart},null,8,["disable","loading","onClick"])])])):(0,i.kq)("",!0)])]),(0,i._)("div",m,[g,(0,i._)("div",null,(0,s.zw)(h.productDetails.descripcion),1)])])}const q={name:"Product",data(){return{loading:!1,slide:1,rating:4,qty:1,productDetails:{nombre:"",descripcion:"",categoria:"",precio:0,stock:0,fotos:[],id:""}}},created(){this.getProductDetails()},computed:{isLoggedIn(){return null!==this.$q.cookies.get("token")},formattedPrice(){return this.productDetails.precio.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}},methods:{getProductDetails(){this.$axios({method:"GET",url:"/api/products/"+this.$route.params.id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")}}).then((t=>{this.productDetails=t.data.data})).catch((t=>{this.$q.notify({position:"bottom-right",color:"negative",message:"Error al obtener los datos del producto"})}))},addToCart(){this.loading=!0;const t={product:this.productDetails.id,qty:this.qty};this.$axios({method:"PUT",url:"/api/cart/add",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")},data:t}).then((()=>{this.loading=!1,this.getProductDetails(),this.$q.notify({position:"bottom-right",color:"positive",message:"Producto agregado al carrito"})})).catch((t=>{this.loading=!1,this.$q.notify({position:"bottom-right",color:"negative",message:"Error al agregar al carrito"})}))}}};var y=o(4260),f=o(1277),v=o(4593),k=o(8833),w=o(4842),D=o(8240),b=o(7518),_=o.n(b);const P=(0,y.Z)(q,[["render",h]]),C=P;_()(q,"components",{QCarousel:f.Z,QCarouselSlide:v.Z,QRating:k.Z,QInput:w.Z,QBtn:D.Z});const x={name:"ProductDetailPage",components:{Product:C}};var V=o(4379);const $=(0,y.Z)(x,[["render",a]]),j=$;_()(x,"components",{QPage:V.Z})}}]);