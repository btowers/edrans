"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[400],{5447:(e,t,o)=>{o.d(t,{Z:()=>m});var a=o(3673);const r={class:"row justify-start back-button"},i={class:"col-auto"};function s(e,t,o,s,l,n){const d=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",i,[(0,a.Wm)(d,{onClick:n.goBack,icon:"arrow_back",flat:"",label:"Atras",color:"primary",class:"q-pa-md"},null,8,["onClick"])])])}const l={name:"BackButton",methods:{goBack(){this.$router.go(-1)}}};var n=o(4260),d=o(8240),c=o(7518),u=o.n(c);const p=(0,n.Z)(l,[["render",s]]),m=p;u()(l,"components",{QBtn:d.Z})},7124:(e,t,o)=>{o.d(t,{Z:()=>u});var a=o(3673),r=o(2323);const i={class:"q-mb-md"},s={class:"text-h5 text-weight-light"};function l(e,t,o,l,n,d){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,(0,r.zw)(o.title),1)])}const n={name:"Title",props:{title:{type:String,required:!0}}};var d=o(4260);const c=(0,d.Z)(n,[["render",l]]),u=c},1400:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var a=o(3673),r=o(2323);const i={class:"column items-center"},s={class:"base-width"},l={class:"q-pa-md"},n=["src"],d={class:"column justify-between",style:{height:"600px"}},c={class:"col"},u={class:"col-auto"},p={class:"row justify-end q-gutter-sm"},m=(0,a.Uk)(" Cancelar ");function h(e,t,o,h,f,g){const b=(0,a.up)("back-button"),y=(0,a.up)("page-title"),k=(0,a.up)("q-item-label"),_=(0,a.up)("q-item-section"),w=(0,a.up)("q-btn"),v=(0,a.up)("q-item"),D=(0,a.up)("q-list"),q=(0,a.up)("q-uploader"),W=(0,a.up)("q-card-section"),C=(0,a.up)("q-separator"),R=(0,a.up)("q-input"),x=(0,a.up)("q-form"),Z=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(b),(0,a._)("div",s,[(0,a.Wm)(y,{title:"Crear Producto"}),(0,a.Wm)(Z,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{horizontal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(q,{onAdded:g.addFiles,onRemoved:g.removeFiles,onUploaded:g.uploadedFile,factory:g.factoryFn,ref:"uploader",label:"Seleccionar imagenes",multiple:"","hide-upload-btn":"","max-file-size":"5000000","max-files":4,accept:".jpg, image/*",style:{width:"100%","max-width":"453px","max-height":"500px"}},{list:(0,a.w5)((e=>[(0,a.Wm)(D,{separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.files,(t=>((0,a.wg)(),(0,a.j4)(v,{key:t.__key},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"full-width ellipsis"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.name),1)])),_:2},1024),(0,a.Wm)(k,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Status: "+(0,r.zw)(t.__status),1)])),_:2},1024),(0,a.Wm)(k,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.__sizeLabel)+" / "+(0,r.zw)(t.__progressLabel),1)])),_:2},1024)])),_:2},1024),t.__img?((0,a.wg)(),(0,a.j4)(_,{key:0,thumbnail:"",class:"gt-xs"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.__img.src},null,8,n)])),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(_,{top:"",side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:o=>e.removeFile(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:1},8,["onAdded","onRemoved","onUploaded","factory"])])])),_:1}),(0,a.Wm)(C,{vertical:""}),(0,a.Wm)(W,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",c,[(0,a.Wm)(x,{onReset:g.formReset,ref:"formRef"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{readonly:f.loading,modelValue:f.productDetails.nombre,"onUpdate:modelValue":t[0]||(t[0]=e=>f.productDetails.nombre=e),name:"nombre",ref:"nombreRef",label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido",e=>e.length>3||"El nombre debe tener al menos 4 caracteres",e=>e.length<50||"El nombre debe tener menos de 50 caracteres"]},null,8,["readonly","modelValue","rules"]),(0,a.Wm)(R,{readonly:f.loading,class:"my-input",modelValue:f.productDetails.precio,"onUpdate:modelValue":t[1]||(t[1]=e=>f.productDetails.precio=e),prefix:"$",type:"precio",name:"precio",ref:"precioRef",label:"Precio","lazy-rules":"",rules:[e=>!!e||"Campo requerido",e=>e>0||"El precio debe ser mayor a 0",e=>e<1e6||"El precio debe ser menor a 1.000.000"]},null,8,["readonly","modelValue","rules"]),(0,a.Wm)(R,{readonly:f.loading,class:"my-input",modelValue:f.productDetails.stock,"onUpdate:modelValue":t[2]||(t[2]=e=>f.productDetails.stock=e),suffix:"un.",type:"stock",name:"stock",ref:"stockRef",label:"Stock","lazy-rules":"",rules:[e=>!!e||"Campo requerido",e=>e>0||"El stock debe ser mayor a 0",e=>e<1e3||"El stock debe ser menor a 1.000"]},null,8,["readonly","modelValue","rules"]),(0,a.Wm)(R,{readonly:f.loading,modelValue:f.productDetails.categoria,"onUpdate:modelValue":t[3]||(t[3]=e=>f.productDetails.categoria=e),type:"categoria",name:"categoria",ref:"categoriaRef",label:"Categoría",rules:[e=>!!e||"Campo requerido"]},null,8,["readonly","modelValue","rules"]),(0,a.Wm)(R,{readonly:f.loading,modelValue:f.productDetails.descripcion,"onUpdate:modelValue":t[4]||(t[4]=e=>f.productDetails.descripcion=e),type:"textarea",name:"descripcion",ref:"descripcionRef",label:"Descripción",rules:[e=>!!e||"Campo requerido",e=>e.length>3||"La descripción debe tener más de 3 caracteres",e=>e.length<500||"La descripción debe tener menos de 500 caracteres"]},null,8,["readonly","modelValue","rules"])])),_:1},8,["onReset"])]),(0,a._)("div",u,[(0,a._)("div",p,[(0,a._)("div",null,[(0,a.Wm)(w,{disable:f.loading,flat:"",color:"primary",onClick:t[5]||(t[5]=e=>this.$router.push("/"))},{default:(0,a.w5)((()=>[m])),_:1},8,["disable"])]),(0,a._)("div",null,[(0,a.Wm)(w,{disable:f.loading,loading:f.loading,color:"primary",label:"Guardar",onClick:g.createProduct},null,8,["disable","loading","onClick"])])])])])])),_:1})])),_:1})])),_:1})])])}var f=o(7124),g=o(5447);const b={name:"NewProductPage",components:{PageTitle:f.Z,BackButton:g.Z},data(){return{counter:0,loading:!1,slide:1,qty:1,productDetails:{id:"",nombre:"",descripcion:"",categoria:"",precio:"",stock:"",fotos:[]}}},methods:{createProduct(){if(this.isInvalidForm())return;this.loading=!0;const e={nombre:this.productDetails.nombre,descripcion:this.productDetails.descripcion,categoria:this.productDetails.categoria,precio:this.productDetails.precio,stock:this.productDetails.stock};this.$axios({method:"POST",url:"/api/products",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")},data:e}).then((e=>{this.productDetails=e.data.data,this.counter>0?this.$refs.uploader.upload():this.doneMessage()})).catch((()=>{this.loading=!1,this.$q.notify({position:"bottom-right",color:"negative",message:"Error al crear el producto"})}))},addFiles(e){this.counter=this.counter+e.length},removeFiles(e){this.counter=this.counter-e.length},uploadedFile(){this.counter--,this.counter<=0&&this.doneMessage()},doneMessage(){this.loading=!1,this.$refs.formRef.reset(),this.$refs.uploader.removeUploadedFiles(),this.counter=0,this.$q.notify({position:"bottom-right",color:"positive",message:"Producto creado con éxito"})},formReset(){this.productDetails.id="",this.productDetails.nombre="",this.productDetails.descripcion="",this.productDetails.categoria="",this.productDetails.precio="",this.productDetails.stock="",this.productDetails.fotos=[]},isInvalidForm(){return this.$refs.formRef.validate(),!!(this.$refs.nombreRef.hasError||this.$refs.precioRef.hasError||this.$refs.stockRef.hasError||this.$refs.categoriaRef.hasError||this.$refs.descripcionRef.hasError)},factoryFn(e){const t=/(?:\.([^.]+))?$/,o=t.exec(e[0].name)[1];return new Promise(((e,t)=>{this.$axios({method:"POST",url:"api/image/presignedurl",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")},data:{productId:this.productDetails.id,type:o}}).then((t=>{const o=t.data.data;e({url:o,method:"PUT",sendRaw:!0})})).catch((e=>{t(e)}))}))}}};var y=o(4260),k=o(151),_=o(5589),w=o(3768),v=o(7011),D=o(3414),q=o(2035),W=o(2350),C=o(8240),R=o(5869),x=o(5269),Z=o(4842),$=o(7518),V=o.n($);const z=(0,y.Z)(b,[["render",h],["__scopeId","data-v-36995088"]]),U=z;V()(b,"components",{QCard:k.Z,QCardSection:_.Z,QUploader:w.Z,QList:v.Z,QItem:D.Z,QItemSection:q.Z,QItemLabel:W.Z,QBtn:C.Z,QSeparator:R.Z,QForm:x.Z,QInput:Z.Z})}}]);