"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[648],{5860:(t,o,e)=>{e.d(o,{Z:()=>m});var a=e(3673);const i={class:"row justify-start back-button"},s={class:"col-auto"};function n(t,o,e,n,r,c){const l=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[(0,a.Wm)(l,{onClick:c.goBack,icon:"arrow_back",flat:"",label:"Atras",color:"primary",class:"q-pa-md"},null,8,["onClick"])])])}const r={name:"BackButton",methods:{goBack(){this.$router.go(-1)}}};var c=e(4260),l=e(8240),d=e(7518),u=e.n(d);const p=(0,c.Z)(r,[["render",n]]),m=p;u()(r,"components",{QBtn:l.Z})},648:(t,o,e)=>{e.r(o),e.d(o,{default:()=>j});var a=e(3673);function i(t,o,e,i,s,n){const r=(0,a.up)("back-button"),c=(0,a.up)("product"),l=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(l,{padding:"",class:"column items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(r),(0,a.Wm)(c)])),_:1})}var s=e(2323);const n={class:"column productDetail"},r={class:"row"},c={class:"col-12 col-md-6 q-pa-sm"},l={class:"col-12 col-md-6 q-pa-sm column justify-between"},d={class:"text-h4"},u={class:"text-h6"},p={key:0,class:"row"},m={class:"column q-pa-sm"},g=(0,a._)("div",{class:"text-h6"},"DescripciÃ³n",-1);function h(t,o,e,i,h,k){const q=(0,a.up)("q-carousel-slide"),v=(0,a.up)("q-carousel"),b=(0,a.up)("q-rating"),y=(0,a.up)("q-input"),f=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",r,[(0,a._)("div",c,[(0,a.Wm)(v,{animated:"",thumbnails:"",modelValue:h.slide,"onUpdate:modelValue":o[0]||(o[0]=t=>h.slide=t),arrows:"",infinite:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.productDetails.fotos,((t,o)=>((0,a.wg)(),(0,a.j4)(q,{key:t,name:o+1,"img-src":"https://coderhouse-ecommerce.s3.amazonaws.com/"+t},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",l,[(0,a._)("div",null,[(0,a._)("div",d,(0,s.zw)(h.productDetails.nombre),1),(0,a._)("div",u,(0,s.zw)(k.formattedPrice),1),(0,a._)("div",null,(0,s.zw)(h.productDetails.stock+" un. disponibles"),1),(0,a.Wm)(b,{modelValue:h.rating,"onUpdate:modelValue":o[1]||(o[1]=t=>h.rating=t),size:"2em",icon:"star"},null,8,["modelValue"])]),k.isLoggedIn?((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",null,[(0,a.Wm)(y,{modelValue:h.qty,"onUpdate:modelValue":o[2]||(o[2]=t=>h.qty=t),modelModifiers:{number:!0},type:"number",rules:[t=>t<=this.productDetails.stock||"No hay stock suficiente",t=>t>0||"La cantidad debe ser mayor a 0"],outlined:"",dense:"",style:{"max-width":"120px"},suffix:"un.",class:"q-mr-sm"},null,8,["modelValue","rules"])]),(0,a._)("div",null,[(0,a.Wm)(f,{disable:h.loading||h.qty<=0||h.qty>h.productDetails.stock,loading:h.loading,icon:"add_shopping_cart",color:"primary",label:"Agregar",onClick:k.addToCart},null,8,["disable","loading","onClick"])])])):(0,a.kq)("",!0)])]),(0,a._)("div",m,[g,(0,a._)("div",null,(0,s.zw)(h.productDetails.descripcion),1)])])}const k={name:"Product",data(){return{loading:!1,slide:1,rating:4,qty:1,productDetails:{nombre:"",descripcion:"",categoria:"",precio:0,stock:0,fotos:[],id:""}}},created(){this.getProductDetails()},computed:{isLoggedIn(){return null!==this.$q.cookies.get("token")},formattedPrice(){return this.productDetails.precio.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}},methods:{getProductDetails(){this.$axios({method:"GET",url:"/api/products/"+this.$route.params.id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")}}).then((t=>{this.productDetails=t.data.data})).catch((t=>{this.$q.notify({position:"bottom-right",color:"negative",message:"Error al obtener los datos del producto"})}))},addToCart(){this.loading=!0;const t={product:this.productDetails.id,qty:this.qty};this.$axios({method:"PUT",url:"/api/cart/add",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")},data:t}).then((()=>{this.loading=!1,this.getProductDetails(),this.$q.notify({position:"bottom-right",color:"positive",message:"Producto agregado al carrito"})})).catch((t=>{this.loading=!1,this.$q.notify({position:"bottom-right",color:"negative",message:"Error al agregar al carrito"})}))}}};var q=e(4260),v=e(1277),b=e(4593),y=e(8833),f=e(4842),w=e(8240),D=e(7518),_=e.n(D);const C=(0,q.Z)(k,[["render",h]]),P=C;_()(k,"components",{QCarousel:v.Z,QCarouselSlide:b.Z,QRating:y.Z,QInput:f.Z,QBtn:w.Z});var Z=e(5860);const B={name:"ProductDetailPage",components:{Product:P,BackButton:Z.Z}};var $=e(4379);const V=(0,q.Z)(B,[["render",i]]),j=V;_()(B,"components",{QPage:$.Z})}}]);