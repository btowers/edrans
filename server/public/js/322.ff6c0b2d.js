"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[322],{8804:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Z});var a=o(3673);function i(t,e,o,i,s,l){const n=(0,a.up)("product"),d=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(d,{padding:"",class:"flex justify-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(n)])),_:1})}var s=o(2323);const l=t=>((0,a.dD)("data-v-3270dffe"),t=t(),(0,a.Cn)(),t),n={class:"column productDetail"},d={class:"row"},r={class:"col-6 q-pa-sm"},c={class:"col-6 q-pa-sm column justify-between"},u={class:"text-h4"},p={class:"text-h6"},m={key:0,class:"row"},g={class:"column q-pa-sm"},h=l((()=>(0,a._)("div",{class:"text-h6"},"DescripciÃ³n",-1)));function f(t,e,o,i,l,f){const v=(0,a.up)("q-carousel-slide"),D=(0,a.up)("q-carousel"),_=(0,a.up)("q-rating"),q=(0,a.up)("q-input"),w=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",d,[(0,a._)("div",r,[(0,a.Wm)(D,{animated:"",thumbnails:"",modelValue:l.slide,"onUpdate:modelValue":e[0]||(e[0]=t=>l.slide=t),arrows:"",infinite:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.productDetails.fotos,((t,e)=>((0,a.wg)(),(0,a.j4)(v,{key:t,name:e+1,"img-src":"https://coderhouse-ecommerce.s3.amazonaws.com/"+t},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",c,[(0,a._)("div",null,[(0,a._)("div",u,(0,s.zw)(l.productDetails.nombre),1),(0,a._)("div",p,(0,s.zw)("$ "+l.productDetails.precio),1),(0,a._)("div",null,(0,s.zw)(l.productDetails.stock+" un. disponibles"),1),(0,a.Wm)(_,{modelValue:l.rating,"onUpdate:modelValue":e[1]||(e[1]=t=>l.rating=t),size:"2em",icon:"star"},null,8,["modelValue"])]),f.isLoggedIn?((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",null,[(0,a.Wm)(q,{modelValue:l.qty,"onUpdate:modelValue":e[2]||(e[2]=t=>l.qty=t),modelModifiers:{number:!0},type:"number",rules:[t=>t<=this.productDetails.stock||"No hay stock suficiente",t=>t>0||"La cantidad debe ser mayor a 0"],outlined:"",dense:"",style:{"max-width":"120px"},suffix:"un.",class:"q-mr-sm"},null,8,["modelValue","rules"])]),(0,a._)("div",null,[(0,a.Wm)(w,{disable:l.loading||l.qty<=0,loading:l.loading,icon:"add_shopping_cart",color:"primary",label:"Agregar",onClick:f.addToCart},null,8,["disable","loading","onClick"])])])):(0,a.kq)("",!0)])]),(0,a._)("div",g,[h,(0,a._)("div",null,(0,s.zw)(l.productDetails.descripcion),1)])])}const v={name:"ProductComponent",data(){return{loading:!1,slide:1,rating:4,qty:1,productDetails:{nombre:"",descripcion:"",categoria:"",precio:0,stock:0,fotos:[],id:""}}},created(){this.getProductDetails()},computed:{isLoggedIn(){return null!==localStorage.getItem("token")}},methods:{getProductDetails(){this.$axios({method:"GET",url:"/api/products/"+this.$route.params.id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((t=>{this.productDetails=t.data.data,console.log(this.productDetails)})).catch((t=>{console.log(t)}))},addToCart(){this.loading=!0;const t={product:this.productDetails.id,qty:this.qty};console.log(t),this.$axios({method:"PUT",url:"/api/cart/add",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")},data:t}).then((()=>{this.loading=!1,this.getProductDetails(),this.$q.notify({position:"bottom-right",color:"positive",message:"Producto agregado al carrito"})})).catch((t=>{this.loading=!1,this.$q.notify({position:"bottom-right",color:"negative",message:"Error al agregar al carrito"})}))}}};var D=o(4260),_=o(1277),q=o(4593),w=o(8833),y=o(4842),b=o(8240),k=o(7518),C=o.n(k);const P=(0,D.Z)(v,[["render",f],["__scopeId","data-v-3270dffe"]]),x=P;C()(v,"components",{QCarousel:_.Z,QCarouselSlide:q.Z,QRating:w.Z,QInput:y.Z,QBtn:b.Z});const V={name:"ProductDetailPage",components:{Product:x}};var j=o(4379);const z=(0,D.Z)(V,[["render",i]]),Z=z;C()(V,"components",{QPage:j.Z})}}]);