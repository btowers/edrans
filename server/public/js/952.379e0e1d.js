"use strict";(self["webpackChunkedrans_client"]=self["webpackChunkedrans_client"]||[]).push([[952],{5952:(t,e,o)=>{o.r(e),o.d(e,{default:()=>S});var i=o(3673);const r={class:"productList"},s=(0,i.Uk)(" Crear producto ");function a(t,e,o,a,n,c){const d=(0,i.up)("q-btn"),l=(0,i.up)("product-card"),u=(0,i.up)("q-table"),m=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(m,{padding:"",class:"column items-center"},{default:(0,i.w5)((()=>[(0,i._)("div",r,[(0,i.Wm)(u,{grid:"",rows:n.items,columns:n.columns,"row-key":"name","hide-header":"",pagination:n.pagination,loading:n.loading,"no-data-label":"No se encontraron productos..."},(0,i.Nv)({item:(0,i.w5)((t=>[(0,i.Wm)(l,{item:t,onReloadProducts:c.getProducts},null,8,["item","onReloadProducts"])])),_:2},[t.user.isAdmin?{name:"top-left",fn:(0,i.w5)((()=>[(0,i.Wm)(d,{dense:"",flat:"",color:"primary",onClick:c.newProduct},{default:(0,i.w5)((()=>[s])),_:1},8,["onClick"])]))}:void 0]),1032,["rows","columns","pagination","loading"])])])),_:1})}o(71);var n=o(2323);const c={class:"col",style:{width:"100%","max-width":"400px","min-width":"300px"}},d={class:"flex flex-center"},l=(0,i._)("div",{class:"absolute-full flex flex-center bg-blue-grey-14 text-white"}," Producto sin imagen ",-1),u={class:"text-subtitle1"},m={class:"text-caption ellipsis text-grey"},p={class:"row justify-end",style:{width:"100%"}},h={class:"col-auto"},g={class:"col-auto"};function w(t,e,o,r,s,a){const w=(0,i.up)("q-img"),f=(0,i.up)("q-item-label"),P=(0,i.up)("q-item-section"),k=(0,i.up)("q-card-section"),b=(0,i.up)("q-separator"),_=(0,i.up)("q-btn"),q=(0,i.up)("q-card-actions"),v=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(v,{class:"product-card q-ma-sm"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=(...t)=>a.openProduct&&a.openProduct(...t))},[(0,i._)("div",d,[(0,i.Wm)(w,{src:"https://coderhouse-ecommerce.s3.amazonaws.com/"+o.item.row.fotos[0],style:{width:"100%","max-width":"350px",height:"300px"},fit:"contain"},{error:(0,i.w5)((()=>[l])),_:1},8,["src"])]),(0,i.Wm)(k,null,{default:(0,i.w5)((()=>[(0,i.Wm)(P,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"text-h6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(o.item.row.nombre),1)])),_:1}),(0,i.Wm)(f,{caption:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(o.item.row.stock+" un."),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(k,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i._)("div",u,(0,n.zw)(a.formattedPrice),1),(0,i._)("div",m,(0,n.zw)(o.item.row.descripcion),1)])),_:1})]),(0,i.Wm)(b),t.user.isAdmin?((0,i.wg)(),(0,i.j4)(q,{key:0},{default:(0,i.w5)((()=>[(0,i._)("div",p,[(0,i._)("div",h,[(0,i.Wm)(_,{flat:"",round:"",icon:"mode_edit",color:"primary",onClick:a.editProduct},null,8,["onClick"])]),(0,i._)("div",g,[(0,i.Wm)(_,{flat:"",round:"",icon:"delete",color:"red",onClick:a.deleteDialog},null,8,["onClick"])])])])),_:1})):(0,i.kq)("",!0)])),_:1})])}var f=o(3617);const P={name:"ProductCard",props:["item"],data(){return{stars:4}},computed:{...(0,f.rn)(["user"]),formattedPrice(){return this.item.row.precio.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}},methods:{openProduct(){this.$router.push({name:"ProductDetailPage",params:{id:this.item.row.id}})},editProduct(){this.$router.push(`/product/edit/${this.item.row.id}`)},deleteDialog(){this.$q.dialog({title:"Eliminar producto",message:"¿Está seguro de eliminar este producto?",ok:"Eliminar",cancel:"Cancelar",persistent:!0,persistentHint:"Presione ESC para cancelar"}).onOk(this.deleteProduct)},deleteProduct(){this.$axios({method:"DELETE",url:"/api/products/"+this.item.row.id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")}}).then((()=>{this.$q.notify({position:"bottom-right",color:"positive",message:"Producto eliminado"}),this.$emit("reloadProducts")})).catch((t=>{this.$q.notify({position:"bottom-right",color:"negative",message:"Error al eliminar el producto"})}))}}};var k=o(4260),b=o(151),_=o(4027),q=o(5589),v=o(2035),C=o(2350),x=o(5869),y=o(9367),$=o(8240),W=o(7518),Z=o.n(W);const Q=(0,k.Z)(P,[["render",w]]),A=Q;Z()(P,"components",{QCard:b.Z,QImg:_.Z,QCardSection:q.Z,QItemSection:v.Z,QItemLabel:C.Z,QSeparator:x.Z,QCardActions:y.Z,QBtn:$.Z});const E={name:"ProductListPage",components:{ProductCard:A},data(){return{pagination:{rowsPerPage:50},priceFilter:"Todos",priceOptions:["Todos","0 - 500","500 - 2000"],stockFilter:"Todos",stockOptions:["Todos","0 - 500","500 - 2000"],loading:!1,columns:[{name:"nombre",label:"Nombre",field:"nombre",align:"left",required:!0,sortable:!0},{name:"descripcion",align:"center",label:"Descripción",field:"descripcion",sortable:!0},{name:"precio",label:"Precio",field:"precio",format:t=>`$ ${t}`,sortable:!0},{name:"stock",label:"Stock",field:"stock",format:t=>`${t} un.`,sortable:!0}],items:[]}},computed:{...(0,f.rn)(["user"])},mounted(){this.getProducts()},methods:{getProducts(){this.loading=!0,this.$axios({method:"GET",url:"/api/products/",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$q.cookies.get("token")}}).then((t=>{this.items=t.data.data,this.loading=!1}))},newProduct(){this.$router.push("/product/new")}}};var T=o(4379),j=o(740);const z=(0,k.Z)(E,[["render",a],["__scopeId","data-v-01c59ce4"]]),S=z;Z()(E,"components",{QPage:T.Z,QTable:j.Z,QBtn:$.Z})}}]);